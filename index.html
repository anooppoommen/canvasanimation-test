<!DOCTYPE html>
<html>
<head>
	<title>welcome canvas test</title>
	<style type="text/css">
		*{
			margin: 0px;
		}
	</style>
</head>
<body>

	<canvas id="myCanvas"></canvas>
	<script type="text/javascript">
		
		var canvas = document.getElementById("myCanvas");
		canvas.height = window.innerHeight ;
		canvas.width  = window.innerWidth;
		
		var c = canvas.getContext("2d");
		var colors = ['#00bdff', '#4d39ce', '#088eff', '#00c9a4']
		var particleCount = 50;

		function randomIntFromRange(min, max) {
    		return Math.floor(Math.random() * (max - min + 1) + min)
		}

		var particle = function(params){
			this.x = params.x
			this.y = params.y
			this.radius = params.radius;
			this.color = params.color;
			this.rad = Math.random() * Math.PI * 2;
			this.velocity = 0.05;
			this.dist = randomIntFromRange(50,120)
			this.lastMouse = {x:params.x,y:params.y}
			this.orientation = params.orientation;

			var self = this;
			
			window.addEventListener('mousemove',function(e){
				self.lastMouse.x += (e.pageX - self.lastMouse.x) * 0.05;
				self.lastMouse.y += (e.pageY - self.lastMouse.y) * 0.05;
				
			});

			this.update = function(){
				var lastPoint = {x : this.x, y : this.y}
				
				
				this.x = this.lastMouse.x + this.orientation *( Math.cos(this.rad) * this.dist) ;
				this.y = this.lastMouse.y + Math.sin(this.rad) * this.dist;
				
				this.rad += this.velocity;
				this.render(lastPoint);
			}

			this.render = function(prev){
				c.beginPath();
				c.strokeStyle = this.color;
				c.lineWidth = this.radius;
				c.moveTo(prev.x,prev.y);
				c.lineTo(this.x,this.y);
				c.stroke();
				c.closePath();
			}

		}
		
		var particles = [];

		function init(){
			for(var i=0;i<particleCount;i++){
				var p = new particle({
					x : canvas.width/2,
					y : canvas.height/2,
					radius : (Math.random() * 2) +1,
					color: colors[Math.floor(Math.random() * colors.length )],
					orientation: Math.random() > .6 ? 1 : -1
				});
				particles.push(p)
			}
		}

		function render(){
			//c.clearRect(0,0,canvas.width,canvas.height);
			
			requestAnimationFrame(render);
			c.fillStyle = 'rgba(255,255,255,0.05)'
			c.fillRect(0,0,canvas.width,canvas.height)
			particles.forEach(function(p){
				p.update();
			});
		}
		
		init()
		render();

</script>

</body>
</html>